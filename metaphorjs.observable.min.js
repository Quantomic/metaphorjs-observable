(function(){'use strict';(function(){var p=function(e){var b,c,a,h;c=1;for(a=arguments.length;c<a;c++)for(b in h=arguments[c],h)e[b]=h[b]},q=function(){var e=this,b={},c={};p(c,{createEvent:function(a,h){a=a.toLowerCase();b[a]||(b[a]=new l(a,h));return b[a]},getEvent:function(a){a=a.toLowerCase();return b[a]},on:function(a,h,c,e){a=a.toLowerCase();b[a]||(b[a]=new l(a));return b[a].on(h,c,e)},once:function(a,b,c,f){f=f||{};f.limit=1;return e.on(a,b,c,f)},un:function(a,c,e){a=a.toLowerCase();b[a]&&b[a].un(c,e)},
hasListener:function(a,c,e){a=a.toLowerCase();return b[a]?b[a].hasListener(c,e):!1},removeAllListeners:function(a){b[a]&&b[a].removeAllListeners()},trigger:function(){var a=[],c=arguments[0],c=c.toLowerCase();if(b[c]){for(var e=1,f=arguments.length;e<f;e++)a.push(arguments[e]);c=b[c];return c.trigger.apply(c,a)}},suspendEvent:function(a){a=a.toLowerCase();b[a]&&b[a].suspend()},suspendAllEvents:function(){for(var a in b)b[a].suspend()},resumeEvent:function(a){a=a.toLowerCase();b[a]&&b[a].resume()},
resumeAllEvents:function(){for(var a in b)b[a].resume()}});p(e,c,{destroy:function(a){if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();e=b=null}},getApi:function(){return c}});return e},l=function(e,b){var c=[],a={},h=Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10),n=!1,f=0,l=this;b=b||!1;p(l,{destroy:function(){e=l=f=n=h=a=c=null},on:function(b,m,d){if(b){m=m||b;d=d||{};var g=e+"_"+h;if(!m[g]){var k=++f,r=d.first||
!1;m[g]=k;b={fn:b,scope:m,id:k,called:0,limit:d.limit||0,start:d.start||1,count:0};r?c.unshift(b):c.push(b);a[k]=b;return k}}},un:function(b,m){var d=-1,g=e+"_"+h,k;k=b==parseInt(b)?b:(m||b)[g];if(!k)return!1;for(var f=0,l=c.length;f<l;f++)if(c[f].id==k){d=f;delete c[f].scope[g];break}if(-1==d)return!1;c.splice(d,1);delete a[k];return!0},hasListener:function(a,b){if(a){b=b||a;var d;d=e+"_"+h;d=a==parseInt(a)?a:b[d];if(!d)return!1;for(var g=0,f=c.length;g<f;g++)if(c[g].id==d)return!0;return!1}return 0<
c.length?c.length:!1},removeAllListeners:function(){for(var b=e+"_"+h,f=0,d=c.length;f<d;f++)delete c[f].scope[b];c=[];a={}},suspend:function(){n=!0},resume:function(){n=!1},trigger:function(){if(!n&&0!=c.length){var e="all"==b?[]:null,f=[],d,g;d=0;for(g=c.length;d<g;d++)f.push(c[d]);for(;d=f.shift();)if(d&&a[d.id]&&(d.count++,!(d.count<d.start))){g=d.fn.apply(d.scope,arguments);d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&e.push(g);if("first"==b&&g)return g;"last"==b&&g&&(e=g);if(!1==b&&
!1===g)break}if(b)return e}}})};window.MetaphorJs&&MetaphorJs.ns?MetaphorJs.ns.register("MetaphorJs.lib.Observable",q):(window.MetaphorJs=window.MetaphorJs||{},MetaphorJs.lib=MetaphorJs.lib||{},MetaphorJs.lib.Observable=q)})();
}());