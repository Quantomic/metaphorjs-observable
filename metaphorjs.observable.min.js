(function(){'use strict';(function(){var p=function(k){var b,c,a,f;c=1;for(a=arguments.length;c<a;c++)for(b in f=arguments[c],f)k[b]=f[b]},m=function(k,b){var c=[],a={},f=Array(11).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,10),e=!1,h=0,m=this;b=b||!1;p(m,{destroy:function(){k=m=h=e=f=a=c=null},on:function(b,n,d){if(b){n=n||b;d=d||{};var g=k+"_"+f;if(!n[g]){var e=++h,l=d.first||!1;n[g]=e;b={fn:b,scope:n,id:e,called:0,limit:d.limit?d.limit:d.once?1:0,start:d.start||1,count:0};l?
c.unshift(b):c.push(b);a[e]=b;return e}}},un:function(b,e){var d=-1,g=k+"_"+f,h;h=b==parseInt(b)?b:(e||b)[g];if(!h)return!1;for(var l=0,m=c.length;l<m;l++)if(c[l].id==h){d=l;delete c[l].scope[g];break}if(-1==d)return!1;c.splice(d,1);delete a[h];return!0},hasListener:function(a,b){if(a){b=b||a;var d;d=k+"_"+f;d=a==parseInt(a)?a:b[d];if(!d)return!1;for(var e=0,h=c.length;e<h;e++)if(c[e].id==d)return!0;return!1}return 0<c.length?c.length:!1},removeAllListeners:function(){for(var b=k+"_"+f,e=0,d=c.length;e<
d;e++)delete c[e].scope[b];c=[];a={}},suspend:function(){e=!0},resume:function(){e=!1},trigger:function(){if(!e&&0!=c.length){var f="all"==b?[]:null,h=[],d,g;d=0;for(g=c.length;d<g;d++)h.push(c[d]);for(;d=h.shift();)if(d&&a[d.id]&&(d.count++,!(d.count<d.start))){g=d.fn.apply(d.scope,arguments);d.called++;d.called==d.limit&&this.un(d.id);"all"==b&&f.push(g);if("first"==b&&g)return g;"last"==b&&g&&(f=g);if(!1==b&&!1===g)break}if(b)return f}}})},q=function(){var k=this,b={},c={};p(c,{createEvent:function(a,
f){a=a.toLowerCase();b[a]||(b[a]=new m(a,f));return b[a]},getEvent:function(a){a=a.toLowerCase();return b[a]},on:function(a,f,e,c){a=a.toLowerCase();b[a]||(b[a]=new m(a));return b[a].on(f,e,c)},once:function(a,b,e,c){c=c||{};c.limit=1;return k.on(a,b,e,c)},un:function(a,c,e){a=a.toLowerCase();b[a]&&b[a].un(c,e)},hasListener:function(a,c,e){a=a.toLowerCase();return b[a]?b[a].hasListener(c,e):!1},removeAllListeners:function(a){b[a]&&b[a].removeAllListeners()},trigger:function(){var a=[],c=arguments[0],
c=c.toLowerCase();if(b[c]){for(var e=1,h=arguments.length;e<h;e++)a.push(arguments[e]);c=b[c];return c.trigger.apply(c,a)}},suspendEvent:function(a){a=a.toLowerCase();b[a]&&b[a].suspend()},suspendAllEvents:function(){for(var a in b)b[a].suspend()},resumeEvent:function(a){a=a.toLowerCase();b[a]&&b[a].resume()},resumeAllEvents:function(){for(var a in b)b[a].resume()}});p(k,c,{destroy:function(a){if(a)a=a.toLowerCase(),b[a]&&(b[a].destroy(),delete b[a]);else{for(var c in b)b[c].destroy();k=b=null}},
getApi:function(){return c}});return k};window.MetaphorJs&&MetaphorJs.ns?MetaphorJs.ns.register("MetaphorJs.lib.Observable",q):(window.MetaphorJs=window.MetaphorJs||{},MetaphorJs.lib=MetaphorJs.lib||{},MetaphorJs.lib.Observable=q)})();
}());